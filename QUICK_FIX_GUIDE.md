# دليل التشغيل السريع - إصلاح مشكلة الدفع والفواتير

## المشكلة الأساسية
**"عند عملية الدفع يقول لي خطأ في حفظ الفاتورة او المنتج غير موجود"**

## خطوات الحل السريع ⚡

### 1. تشخيص سريع للمشكلة
```bash
# في terminal داخل مجلد المشروع
dart diagnose_inventory_system.dart
```

**النتائج المتوقعة:**
- ✅ إذا ظهر "لم يتم العثور على أي مشاكل" → النظام سليم
- ⚠️ إذا ظهرت مشاكل → اتبع الخطوات التالية

### 2. إصلاح تلقائي للمشاكل
```bash
# تشغيل أداة الإصلاح التلقائي
dart fix_inventory_system.dart
```

### 3. إضافة منتجات تجريبية (إذا كان المخزون فارغ)
```bash
# إضافة بيانات تجريبية
dart setup_sample_data.dart
```

## الأسباب الشائعة للمشكلة 🔍

### 1. منتج غير موجود
**السبب:** المنتج المحدد غير موجود في قاعدة البيانات
**الحل:**
- تحقق من كود المنتج
- أضف المنتج إذا كان مفقود
- استخدم أداة التشخيص للفحص

### 2. كود منتج خاطئ
**السبب:** الكود المدخل لا يطابق أي منتج
**الحل:**
- تحقق من صحة الكود
- استخدم المسح الضوئي إن وجد
- ابحث بالاسم بدلاً من الكود

### 3. نفاد المخزون
**السبب:** الكمية المطلوبة أكبر من المتاح
**الحل:**
- تحقق من الكمية المتاحة
- قم بتحديث المخزون
- قلل الكمية المطلوبة

### 4. خطأ في قاعدة البيانات
**السبب:** مشكلة في الاتصال أو هيكل البيانات
**الحل:**
- تشغيل أداة الإصلاح
- إعادة تهيئة قاعدة البيانات
- التحقق من أذونات الملفات

## خطوات التحقق اليدوي 🔧

### 1. فحص المنتجات
1. اذهب إلى شاشة "إدارة المنتجات"
2. تحقق من وجود منتجات
3. تأكد من صحة الأكواد والكميات

### 2. اختبار عملية البيع
1. أضف منتج للفاتورة
2. تحقق من حساب المجموع
3. أدخل المبلغ المدفوع
4. حاول حفظ الفاتورة

### 3. مراجعة رسائل الخطأ
- اقرأ رسالة الخطأ بعناية
- حدد نوع المشكلة (منتج، فاتورة، قاعدة بيانات)
- طبق الحل المناسب

## حلول متقدمة 💼

### إعادة تهيئة النظام
```bash
# حذف قاعدة البيانات الحالية (احتفظ بنسخة احتياطية)
# Windows
del database\pos_database.db

# إعادة تشغيل التطبيق لإنشاء قاعدة بيانات جديدة
```

### استيراد البيانات
```bash
# إذا كان لديك ملف بيانات
dart import_products.dart products.csv
```

## اختبار النظام بعد الإصلاح ✅

### 1. اختبار أساسي
- [ ] إضافة منتج جديد
- [ ] البحث عن المنتج بالكود
- [ ] إضافة المنتج للفاتورة
- [ ] حفظ الفاتورة
- [ ] التحقق من تحديث المخزون

### 2. اختبار شامل
```bash
# تشغيل اختبارات النظام
dart test_inventory_system.dart
```

## رسائل الخطأ الشائعة 📋

### "منتج غير موجود"
```
الحل:
1. تحقق من الكود المدخل
2. ابحث في قائمة المنتجات
3. أضف المنتج إذا كان مفقود
```

### "خطأ في حفظ الفاتورة"
```
الحل:
1. تحقق من اتصال قاعدة البيانات
2. تأكد من صحة بيانات الفاتورة
3. جرب إعادة المحاولة
```

### "كمية غير كافية"
```
الحل:
1. تحقق من المخزون المتاح
2. قم بتحديث الكميات
3. قلل الكمية المطلوبة
```

## للمساعدة الإضافية 📞

### ملفات التوثيق
- `TROUBLESHOOTING_GUIDE.md` - دليل تفصيلي لحل المشاكل
- `POS_SYSTEM_README.md` - شرح شامل للنظام
- `INVENTORY_SYSTEM_README.md` - دليل إدارة المخزون

### أدوات التشخيص
- `diagnose_inventory_system.dart` - تشخيص سريع
- `test_inventory_system.dart` - اختبار شامل
- `fix_inventory_system.dart` - إصلاح تلقائي

## ملاحظات مهمة ⚠️

1. **احتفظ بنسخة احتياطية** من بياناتك قبل تطبيق أي إصلاحات
2. **اختبر النظام** في بيئة آمنة قبل الاستخدام الفعلي
3. **راجع التحديثات** بانتظام للحصول على إصلاحات جديدة
4. **وثق المشاكل** التي تواجهها للمساعدة في التطوير

---

**تذكر:** معظم مشاكل "المنتج غير موجود" تحدث بسبب:
- أكواد منتجات خاطئة (70%)
- مخزون فارغ (20%)  
- مشاكل قاعدة البيانات (10%)

ابدأ بالتشخيص السريع ثم اتبع الحلول المناسبة! 🎯
